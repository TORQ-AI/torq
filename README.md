# PACE (Strava Activity Image Generator)

**PACE** (**P**ersonal **A**ctivity **C**anvas **E**ngine) is an AI-powered [Strava](https://www.strava.com/) activity image generator that automatically turns your workouts into visually compelling images. It analyzes activity data and context to create shareable, expressive visuals for each Strava activity, helping athletes present their performance and stories in a more engaging and personalized way.

![One athele is running. Another athele is riding a road bicycle. Minimalistic style with dark colour tones.](./banner.webp)

## Specification Validation Workflows

Validation happens entirely in CI using a two-stage workflow:

- **Static OpenSpec validation** – runs the OpenSpec CLI against the repository, renders totals and a table showing every validated spec, and exposes the raw JSON for follow-on jobs. Failures block the run and unlock an AI fix pipeline that requires manual approval.
- **AI validation** – scopes to the official `openspec/specs` tree, keeps a detailed table of each validated spec even when there are no violations, and logs prompts/notes for debugging. Only the tracked spec files are shown in the summary, and the job still reports every violation it finds.
- **AI-based violation fixing** – triggered via a reusable workflow once validation fails and approval is granted. It runs CodeMie with the validation summary, captures the suggested changes, and opens a PR that clearly states it was generated by the agent.

```
┌───────────────────────────────────────────────────────────────────────────┐
│ Developer Action: Push to main, open PR, or Manual Trigger                │
│ (changes to openspec/**, workflows, validation packages)                  │
└───────────────────┬───────────────────────────────────────────────────────┘
                    │
                    ├─────────────────────┐
                    ▼                     ▼
        ┌───────────────────┐ ┌───────────────────┐
        │ OpenSpec          │ │ AI Validation     │
        │ Static Validation │ │ (requires manual  │
        │ (runs auto)       │ │ approval first)   │
        └─────┬─────────────┘ └─────┬─────────────┘
              │                     │
    ┌─────────┴──────────────┐──────┴──────────────┐
    ▼                        ▼                     ▼
  PASS                      FAIL                  PASS
    │                        │                     │
    │                        |                     │
    │                        │                     │         
    │                        ▼                     |      
    │             ┌──────────────────┐             │
    │             │ Approve OpenSpec │             │
    │             │ Fix (manual)     │             │
    │             └────┬─────────────┘             │
    │               Approved                       |
    |                  │                           |
    │                  ▼                           │
    │             ┌──────────────────┐             │
    │             │ AI Fix Agent     │             │
    │             └────┬─────────────┘             │
    │                  │                           │
    │             ┌──────────────────┐             │
    │             │ PR Created       │             │
    │             │ agent/specs-fix- │             │
    │             │ {run_id}         │             | 
    │             └────┬─────────────┘             │
    │                  │                           │
    │                  ▼                           │
    │             ┌──────────────────┐             │
    │             │ Developer Reviews│             │
    │             │ & Merges PR      │             │
    │             └────┬─────────────┘             │
    │                  │                           │
    └──────────────────┴───────────────────────────└──► DONE

Developer View Points:
• View results: GitHub Actions Summary shows validation tables
• OpenSpec: All repository specs validated, table shows each spec status
• AI Validation: Only openspec/specs/ validated, detailed table with all specs
• Approval gates: Manual approval required before AI validation runs
• Fix approval: Manual approval required before fix agent creates PR
• PR verification: Merging PR triggers validations again (full cycle)

Key Behaviors:
1. Both validations run INDEPENDENTLY (not sequentially)
2. AI validation requires approval BEFORE running
3. Fix workflows require approval AFTER validation fails
4. Each fix agent creates a PR for developer review
5. PR merge re-triggers both validation workflows
```

Tests: GitHub Actions workflows serve as the canonical validation, so no separate local test command is required.
